From e504604afc8f1a5b3bd9efdcb97b02fce4e53f57 Mon Sep 17 00:00:00 2001
From: rbuj <robert.buj@gmail.com>
Date: Mon, 14 Mar 2022 13:31:00 +0100
Subject: [PATCH 2/2] mate-settings-manager: fix memory leak

---
 mate-settings-daemon/mate-settings-manager.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/mate-settings-daemon/mate-settings-manager.c b/mate-settings-daemon/mate-settings-manager.c
index 91b5d130..8c511a10 100644
--- a/mate-settings-daemon/mate-settings-manager.c
+++ b/mate-settings-daemon/mate-settings-manager.c
@@ -427,15 +427,18 @@ static void
 mate_settings_manager_init (MateSettingsManager *manager)
 {
         char      *schema;
-        GSettings *settings;
 
         manager->priv = mate_settings_manager_get_instance_private (manager);
 
         schema = g_strdup_printf ("%s.plugins", DEFAULT_SETTINGS_PREFIX);
         if (is_schema (schema)) {
+                GSettings *settings;
+
                 settings = g_settings_new (schema);
                 manager->priv->init_load_priority = g_settings_get_int (settings, "init-load-priority");
+                g_object_unref (settings);
         }
+        g_free (schema);
 }
 
 static void
-- 
2.36.1

